{{ define "main" }}

{{ partial "page-header.html" . }}

<section class="section">
  <div class="container">
    <div class="row justify-content-center align-items-center">
      <div class="col-lg-5 col-md-8 text-center mb-5 mb-lg-0" data-aos="fade-up">
        <div class="pr-0 pr-lg-5">
          {{ if fileExists (add `assets/` .Params.book_image) }}
          {{$img:= resources.Get .Params.book_image }}
          {{$img:= $img.Resize "575x"}}
          <img loading="lazy" decoding="async" class="img-fluid" width="{{$img.Width}}" height="{{$img.Height}}" src="{{$img.RelPermalink}}" alt="cobtact image" onerror="this.onerror=null;this.src='{{$img.RelPermalink}}'">
          {{end}}
        </div>
      </div>
      {{with site.Params.book_form_action}}
      <div class="col-lg-5 col-md-10" data-aos="fade-up">
        <div class="contact-form">
          <div class="mb-4">
            <h3>Book A Consultation (GH₵50.00 or ₦3000.00)</h3>
          </div>
          <form id="book-form" action="{{.}}" method="POST">
            <p id="form-status" class="form-status"></p>
            <div class="form-group">
              <label for="name">Full Name</label>
              <input class="form-control shadow-none" id="name" name="full_name" type="text" placeholder="Full Name" required>
            </div>
            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input class="form-control shadow-none" id="phone" name="phone" type="tel" placeholder="Phone Number" required>
            </div>
            <div class="form-group">
              <label for="date-time">Preferred Time</label>
              <input class="form-control shadow-none" id="date-time" name="date-time" type="datetime-local" placeholder="Phone Number" required>
            </div>
            <div class="form-group">
              <p>How will you like to pay:</p>
              <input type="radio" id="mobile" name="payment_method" value="Mobile Money" required>
              <label for="mobile">Mobile Money</label><br>
              <input type="radio" id="bank" name="payment_method" value="Bank" required>
              <label for="bank">Bank Transfer</label><br>

            </div>
            <div class="form-group">
              <label for="reason">Reason for consultation</label>
              <textarea class="form-control shadow-none" id="reason" name="reason" rows="4"></textarea>
            </div>
            <div>
              <p>Kindly note that consultations typically run for up to 30 minutes</p>
            </div>

            <button class="btn btn-primary w-100 mt-4" type="submit" aria-label="Book Consultation">Book Consultation</button>
          </form>
        </div>
      </div>

      <script>
        var form = document.getElementById('book-form');
        async function handleSubmit(event) {
          event.preventDefault();
          var status = document.getElementById("form-status");
          var data = new FormData(event.target);
          fetch(event.target.action, {
            method: form.method,
            body: data,
            headers: {
              'Accept': 'application/json'
            }
          }).then(response => {
            status.innerHTML = "We will reach out ASAP!";
            form.reset()
          }).catch(error => {
            status.innerHTML = "Oops! There was a problem submitting your form";
          });
        }
        form.addEventListener("submit", handleSubmit)
      </script>
      {{end}}
    </div>

  </div>
</section>

{{ end }}
